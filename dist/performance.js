"use strict";(()=>{gsap.registerPlugin(ScrollTrigger);$(document).ready(function(){let y=()=>{let e=$("#ootb_logo"),r=$("#bar-slow_1"),t=$("#bar-slow_2"),l=$("#bar-slow_3"),o=$("#max_logo"),s=$("#bar-fast_1"),c=$("#bar-fast_2"),i=$("#bar-fast_3"),d=$("#headers"),m=$("#numbers"),g=$("#grid"),n=.7,a=gsap.timeline({defaults:{ease:Power2.easeOut}});return a.to($(".headerb_stage-2"),{opacity:1}),a.fromTo([e,o,d,m],{opacity:0,xPercent:-15},{opacity:1,xPercent:0,duration:.5}),a.fromTo(g,{scaleY:0},{scaleY:1,duration:.5},"<"),a.addLabel("bars-start","<0.2"),a.fromTo(l,{scaleX:0},{scaleX:1,duration:n},"bars-start"),a.fromTo(t,{scaleX:0},{scaleX:.428,duration:n},"<"),a.fromTo(r,{scaleX:0},{scaleX:.295,duration:n},"<"),a.to(t,{scaleX:1,duration:n}),a.to(r,{scaleX:.695,duration:n},"<"),a.to(r,{scaleX:1,duration:n}),a.fromTo(i,{scaleX:0},{scaleX:1,duration:n},"bars-start"),a.fromTo(c,{scaleX:0},{scaleX:1,duration:n},"<"),a.fromTo(s,{scaleX:0},{scaleX:1,duration:n},"<"),a};gsap.timeline({}).add(y());let h=".perf2_model-mask",P,S;function N(e){return e.toLocaleString("en")}let C=(e,r)=>{$(e).each(function(){let t=$(this).text().trim().replace(/,/g,""),l=parseFloat(t)||0,o=parseFloat(r);if(console.log(o),!isNaN(o)&&l!==o){let s={val:l},c=1;console.log(c);let i=()=>{let d=N(parseFloat(s.val.toFixed(c)));$(this).text(d)};gsap.fromTo(s,{val:l},{val:o,duration:.7,ease:Power1.easeOut,onUpdate:i})}})},p=(e,r)=>{$(e).each(function(){gsap.to(e,{text:r,duration:.5,ease:Power1.easeOut})})};function b(e,r){let{activeIndex:t,slides:l}=e,o=l[t],s=i=>{let d=$(i).find(h),m=d.find("p").outerHeight();gsap.to(d,{height:m})},c=gsap.timeline({onComplete:()=>{r&&s(o)}});l.forEach(i=>{c.to($(i).find(h),{height:0,duration:.2},"<")})}function w(e){let r=e.swiper1.realIndex,t=$(e.swiper1.slides[r]),l=$("[stat-number]"),o=$("[model-name-full]"),s=$("[instance-name-full]"),c=$(".perf2_slider-2 .perf2_model-mask p"),i=[$("[data-instance-1-short]").text(),$("[data-instance-2-short]").text(),$("[data-instance-3-short]").text()],d=t.find("[data-model-full]").text(),m=[t.attr("data-instance-1-full"),t.attr("data-instance-2-full"),t.attr("data-instance-3-full")],g=[t.attr("data-performance-1-val"),t.attr("data-performance-2-val"),t.attr("data-performance-3-val")],n=e.swiper2.realIndex;c.each(function(a,_){console.log(a),p($(_),m[a])}),C(l,g[n]),p(o,d),p(s,i[n]+" "+m[n])}let u={swiper1:T(".perf2_slider-1",{}),swiper2:T(".perf2_slider-2")},f=0,x,v=new IntersectionObserver(e=>{e[0].isIntersecting&&(x=new Date,v.disconnect())},{root:null,threshold:.5});v.observe(document.querySelector(".perf2_slider-1")),window.addEventListener("beforeunload",()=>{let e=Math.round((new Date-x)/1e3);amplitude.track("timeSpentOnPerformance",{timeInSeconds:e}),amplitude.track("totalClicksOnPerformance",{count:f})});function T(e,r){return new Swiper(e,{slidesPerView:1,direction:"vertical",observer:!0,slideToClickedSlide:!0,init:!1,threshold:40,freeMode:{enabled:!0,sticky:!0},on:{init:function(){b(this,!0)}},mousewheel:{thresholdDelta:20},...r})}for(let e in u)if(u.hasOwnProperty(e)){let r=u[e],t;r.on("slideChange",function(){var o;let l=(o=this.slides[this.activeIndex])==null?void 0:o.innerText;clearTimeout(t),t=setTimeout(()=>{f=f+1,amplitude.track("performanceSelected",{modelOrInstance:l}),b(this,!0),w(u)},300)}),r.init()}let k=gsap.timeline({scrollTrigger:{trigger:$(".perf2"),start:"center bottom",onEnter:()=>{u.swiper1.slideTo(5,800,w(u)),u.swiper2.slideTo(1,800)}}})});})();
